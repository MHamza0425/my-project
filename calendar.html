<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Smart Calendar - All Tools Hub</title>
<meta name="description" content="Smart responsive calendar with light/dark mode, today button, tooltips, event notes, and keyboard navigation." />
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = { darkMode: 'media' }
</script>
<style>
.day-cell {
  transition: background 0.2s ease, transform 0.1s ease;
}
.day-cell:hover {
  transform: scale(1.05);
}
.week-number {
  font-weight: bold;
  text-align: center;
  padding: 2px;
  color: gray;
}
.week-number:hover {
  background-color: #d1d5db; /* Tailwind gray-300 */
  cursor: pointer;
}
.tooltip {
  position: absolute;
  background: rgba(0,0,0,0.75);
  color: white;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 12px;
  white-space: nowrap;
  z-index: 50;
  display: none;
}
</style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-200 dark:from-gray-900 dark:to-gray-800 text-gray-800 dark:text-gray-100 font-sans flex flex-col min-h-screen">

<!-- Header -->
<header class="bg-white dark:bg-gray-800 shadow fixed w-full z-50">
  <div class="max-w-6xl mx-auto flex justify-between items-center px-4 py-3">
    <h1 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400 cursor-pointer"
        onclick="window.location.href='index.html'">All Tools Hub</h1>
    <button id="mobileMenuBtn" class="md:hidden text-2xl">â˜°</button>
    <nav id="desktopMenu" class="hidden md:flex gap-6 text-sm font-medium">
      <a href="index.html#about" class="hover:text-indigo-600 dark:hover:text-indigo-400">About</a>
      <a href="index.html#tools" class="hover:text-indigo-600 dark:hover:text-indigo-400">Tools</a>
      <a href="contact.html" class="hover:text-indigo-600 dark:hover:text-indigo-400">Contact</a>
      <a href="privacy.html" class="hover:text-indigo-600 dark:hover:text-indigo-400">Privacy</a>
      <a href="terms.html" class="hover:text-indigo-600 dark:hover:text-indigo-400">Terms</a>
    </nav>
  </div>
  <div id="mobileMenu" class="hidden bg-white dark:bg-gray-800 border-t text-center py-3 space-y-2 md:hidden">
    <a href="index.html#about" class="block hover:text-indigo-600 dark:hover:text-indigo-400">About</a>
    <a href="index.html#tools" class="block hover:text-indigo-600 dark:hover:text-indigo-400">Tools</a>
    <a href="contact.html" class="block hover:text-indigo-600 dark:hover:text-indigo-400">Contact</a>
    <a href="privacy.html" class="block hover:text-indigo-600 dark:hover:text-indigo-400">Privacy</a>
    <a href="terms.html" class="block hover:text-indigo-600 dark:hover:text-indigo-400">Terms</a>
  </div>
</header>

<!-- Calendar Section -->
<main class="flex-1 pt-28 pb-12 px-4">
<section class="max-w-3xl mx-auto">
<h2 class="text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-6 text-center">Smart Calendar</h2>

<div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 relative">
  <!-- Controls -->
  <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-3 sticky top-0 bg-white dark:bg-gray-800 p-2 rounded">
    <div class="flex items-center gap-2">
      <button onclick="prevMonth()" class="px-3 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700">â—€</button>
      <button onclick="nextMonth()" class="px-3 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700">â–¶</button>
      <button onclick="goToToday()" class="px-3 py-1 rounded bg-pink-600 text-white hover:bg-pink-700">Today</button>
    </div>
    <div class="flex items-center gap-2">
      <select id="monthSelect" class="px-2 py-1 rounded border dark:bg-gray-700"></select>
      <select id="yearSelect" class="px-2 py-1 rounded border dark:bg-gray-700"></select>
      <button onclick="goToSelectedDate()" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">Go</button>
      <button id="sciModeBtn" class="px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700">Sci Mode</button>
      <button id="voiceBtn" class="px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700">ðŸŽ¤ Voice</button>
    </div>
  </div>

  <!-- Weekdays -->
  <div class="grid grid-cols-8 gap-2 text-center font-medium mb-2">
    <div>#</div>
    <div class="text-red-500">Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div class="text-blue-500">Sat</div>
  </div>

  <!-- Days -->
  <div id="calendarDays" class="grid grid-cols-8 gap-2 text-center text-sm sm:text-base"></div>
</div>

<!-- Event Notes Section -->
<div id="eventBox" class="mt-6 bg-white dark:bg-gray-800 p-4 rounded-xl shadow hidden">
<h3 class="text-lg font-bold mb-2">Notes for <span id="eventDate"></span></h3>
<textarea id="eventText" class="w-full p-2 border rounded dark:bg-gray-700"></textarea>
<button onclick="saveEvent()" class="mt-2 px-4 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700">Save</button>
</div>
</section>
</main>

<!-- Footer -->
<footer class="bg-gray-900 text-gray-300 py-6 text-center text-sm">
Â© 2025 All Tools Hub. All rights reserved. | ðŸ“§ <a href="mailto:saadkhan0425@gmail.com" class="underline hover:text-white">saadkhan0425@gmail.com</a>
</footer>

<!-- Tooltip -->
<div id="tooltip" class="tooltip"></div>

<script>
document.getElementById("mobileMenuBtn").addEventListener("click", () => {
  document.getElementById("mobileMenu").classList.toggle("hidden");
});

const calendarDays = document.getElementById("calendarDays");
const monthSelect = document.getElementById("monthSelect");
const yearSelect = document.getElementById("yearSelect");
const tooltip = document.getElementById("tooltip");
const eventBox = document.getElementById("eventBox");
const eventDateSpan = document.getElementById("eventDate");
const eventText = document.getElementById("eventText");
const sciModeBtn = document.getElementById("sciModeBtn");
const voiceBtn = document.getElementById("voiceBtn");

const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];

let currentDate = new Date();
let selectedDate = null;
let sciMode = false;
let events = JSON.parse(localStorage.getItem("calendarEvents") || "{}");

// Populate dropdowns
function populateSelectors() {
  months.forEach((m, i) => {
    const opt = document.createElement("option");
    opt.value = i; opt.textContent = m;
    monthSelect.appendChild(opt);
  });
  for (let y = 1900; y <= 2100; y++) {
    const opt = document.createElement("option");
    opt.value = y; opt.textContent = y;
    yearSelect.appendChild(opt);
  }
}

// Week number calculation
function getWeekNumber(d) {
  d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
  const dayNum = d.getUTCDay() || 7;
  d.setUTCDate(d.getUTCDate() + 4 - dayNum);
  const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
  return Math.ceil((((d - yearStart) / 86400000) + 1)/7);
}

// Render calendar
function renderCalendar() {
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  monthSelect.value = month; yearSelect.value = year;

  calendarDays.innerHTML = '';
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  let day = 1;

  // 5-6 weeks display
  for (let week = 0; day <= daysInMonth; week++) {
    const tempDate = new Date(year, month, day);
    const weekNum = sciMode ? getWeekNumber(tempDate) : '';

    // Week number cell
    const weekNumCell = document.createElement("div");
    weekNumCell.textContent = weekNum;
    weekNumCell.className = "week-number cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-700";
    weekNumCell.addEventListener("click", () => {
      const firstDayOfWeek = new Date(tempDate);
      const dayOfWeek = firstDayOfWeek.getDay();
      firstDayOfWeek.setDate(firstDayOfWeek.getDate() - dayOfWeek);
      currentDate = new Date(firstDayOfWeek.getFullYear(), firstDayOfWeek.getMonth(), 1);
      selectedDate = firstDayOfWeek;
      renderCalendar();
    });
    calendarDays.appendChild(weekNumCell);

    for (let i = 0; i < 7; i++) {
      if(day > daysInMonth) { 
        calendarDays.appendChild(document.createElement("div")); 
        continue; 
      }
      const dayCell = document.createElement("div");
      dayCell.textContent = day;
      dayCell.className = "day-cell p-2 rounded cursor-pointer relative";

      const dayOfWeek = new Date(year, month, day).getDay();
      if (dayOfWeek === 0) dayCell.classList.add("text-red-500","font-semibold");
      if (dayOfWeek === 6) dayCell.classList.add("text-blue-500","font-semibold");

      const today = new Date();
      if(day===today.getDate() && month===today.getMonth() && year===today.getFullYear()) {
        dayCell.classList.add("bg-indigo-500","text-white","font-bold");
      }

      if(selectedDate && day===selectedDate.getDate() && month===selectedDate.getMonth() && year===selectedDate.getFullYear()) {
        dayCell.classList.add("bg-green-500","text-white");
      }

      const key = `${year}-${month}-${day}`;
      if(events[key]){
        const dot = document.createElement("div");
        dot.className = "absolute bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-pink-500 rounded-full";
        dayCell.appendChild(dot);
      }

      dayCell.addEventListener("mouseenter",(e)=>{
        tooltip.textContent=`${months[month]} ${day}, ${year}`;
        tooltip.style.display="block";
        tooltip.style.left=e.pageX+"px";
        tooltip.style.top=e.pageY-30+"px";
      });
      dayCell.addEventListener("mouseleave",()=>tooltip.style.display="none");

      dayCell.addEventListener("click",()=>{
        selectedDate=new Date(year,month,day);
        eventDateSpan.textContent=tooltip.textContent;
        eventText.value = events[key] || "";
        eventBox.classList.remove("hidden");
        renderCalendar();
      });

      calendarDays.appendChild(dayCell);
      day++;
    }
  }
}

// Navigation
function prevMonth(){ currentDate.setMonth(currentDate.getMonth()-1); renderCalendar(); }
function nextMonth(){ currentDate.setMonth(currentDate.getMonth()+1); renderCalendar(); }
function goToSelectedDate(){ currentDate = new Date(parseInt(yearSelect.value), parseInt(monthSelect.value), 1); renderCalendar(); }
function goToToday(){ currentDate = new Date(); selectedDate=null; renderCalendar(); }

// Save event
function saveEvent() {
  if(!selectedDate) return;
  const key=`${selectedDate.getFullYear()}-${selectedDate.getMonth()}-${selectedDate.getDate()}`;
  if(eventText.value.trim()){ events[key]=eventText.value.trim(); } else { delete events[key]; }
  localStorage.setItem("calendarEvents", JSON.stringify(events));
  renderCalendar();
}

// Keyboard navigation
document.addEventListener("keydown",(e)=>{
  if(!selectedDate) return;
  if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)){
    e.preventDefault();
    if(e.key==="ArrowLeft") selectedDate.setDate(selectedDate.getDate()-1);
    if(e.key==="ArrowRight") selectedDate.setDate(selectedDate.getDate()+1);
    if(e.key==="ArrowUp") selectedDate.setDate(selectedDate.getDate()-7);
    if(e.key==="ArrowDown") selectedDate.setDate(selectedDate.getDate()+7);
    currentDate=new Date(selectedDate.getFullYear(),selectedDate.getMonth(),1);
    renderCalendar();
  }
});

// Sci Mode toggle
sciModeBtn.addEventListener("click", ()=>{
  sciMode = !sciMode;
  renderCalendar();
});

// Voice input
let recognition;
if('webkitSpeechRecognition' in window){
  recognition = new webkitSpeechRecognition();
  recognition.lang = 'en-US';
  recognition.continuous = false;
  recognition.interimResults = false;

  recognition.onresult = function(e){
    const result = e.results[0][0].transcript;
    if(selectedDate){
      eventText.value = result;
    }
  };
}
voiceBtn.addEventListener("click", ()=>{
  if(recognition) recognition.start();
});

populateSelectors();
renderCalendar();
</script>
</body>
</html>
